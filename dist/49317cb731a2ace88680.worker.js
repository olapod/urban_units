!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=1)}([function(t,r){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(r){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},n(r)}t.exports=n},function(t,r,e){"use strict";e.r(r);var n=e(0),a=e.n(n),o=function(t,r){for(var e=0;e<t.length;e++)t[e].numer&&t[e].numer.match(/^\d+/gi)&&(t[e].numer=t[e].numer.match(/^\d+/gi),t[e].numer=parseInt(t[e].numer));for(e=0;e<t.length;e++)t[e].ulica&&(t[e].ulica=t[e].ulica.trim(),t[e].ulica=t[e].ulica.replace(/\s{2,}/g," "),t[e].ulica=t[e].ulica.toLowerCase());for(var n=0;n<t.length;n++)for(e=0;e<r.length;e++)r[e].ULICA===t[n].ulica&&r[e].NUMERY===1/0&&(t[n].jednostka=r[e].JEDNOSTKA_URBANISTYCZNA),r[e].ULICA===t[n].ulica&&Array.isArray(r[e].NUMERY)&&r[e].NUMERY.includes(t[n].numer)&&(t[n].jednostka=r[e].JEDNOSTKA_URBANISTYCZNA),r[e].ULICA!==t[n].ulica||"object"!==a()(r[e].NUMERY)||r[e].NUMERY.no!==1/0||r[e].NUMERY.exception.includes(t[n].numer)||(t[n].jednostka=r[e].JEDNOSTKA_URBANISTYCZNA),r[e].ULICA===t[n].ulica&&null===t[n].numer&&(t[n].jednostka=r[e].JEDNOSTKA_URBANISTYCZNA);return t},u=function(t){for(var r=[],e=1;e<89;e++){var n=t.filter((function(t){return t.jednostka==e})).length;r.push({id:e,count:n})}return r},i=function(t){for(var r=[],e=0;e<t.length;e++)t[e].jednostka||r.push(t[e]);return r};self.addEventListener("message",t=>{if(!t)return;const r=t.data.urban_units,e=t.data.database,n=function(t){for(var r=[],e=[],n=0;n<t.length;n++)void 0===t[n].JEDNOSTKA_URBANISTYCZNA&&t.splice(n,1);for(var a in t)t[a].ULICA&&r.push(t[a].ULICA);for(n=0;n<r.length;n++)r[n]=r[n].replace(/(?<=([A-ZŻŹĆĄŚĘŁÓŃ][a-zżźćńółęąś]*))((\s\d|\sparzyste|\snieparzyste|\sza wyjątkiem).*)/g,""),r[n]=r[n].trim(),r[n]=r[n].replace(/\s{2,}/g," "),r[n]=r[n].toLowerCase();for(e=t.map((function(t){return t.ULICA.replace(/(?<=\d)[^\d,\-]/gi,"")})),n=0;n<e.length;n++)e[n]=e[n].match(/(?<=([A-ZŻŹĆĄŚĘŁÓŃ][a-zżźćńółęąś]*\s))((\d|parzyste|nieparzyste|za wyjątkiem).*)/g);for(n=0;n<e.length;n++)null===e[n]?e[n]=Number.POSITIVE_INFINITY:e[n]=e[n].join();function o(t){function r(t,r){return new Array(r-t+1).fill(void 0).map((function(r,e){return e+t}))}if(t.match(/^parzyste:\s\d+-\d+,\snieparzyste:\s\d+-\d+/g)){for(var e=t.match(/[\d\-]+(?=,\s)/g),n=t.match(/\d+\-\d+$/g),a=e[0].match(/^\d+/g).map((function(t){return parseInt(t)})),o=e[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),u=n[0].match(/^\d+/g).map((function(t){return parseInt(t)})),i=n[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),c=r(a[0],o[0]),p=r(u[0],i[0]),s=[],l=[],f=0;f<c.length;f++)c[f]%2!=1&&s.push(c[f]);for(f=0;f<p.length;f++)p[f]%2==1&&l.push(p[f]);l.toString(),s.toString();var m=s+","+l;return(t=t.replace(/^parzyste.*/g,m)).split(",").map(Number)}if(t.match(/^\d+\-\d+/g)){var d=t.match(/^\d+\-\d+/g),g=d[0].match(/^\d+/g).map((function(t){return parseInt(t)})),y=d[0].match(/[\d]+$/g).map((function(t){return parseInt(t)}));return(m=r(g[0],y[0])).toString(),(t=t.replace(/^\d+\-\d+/g,m)).split(",").map(Number)}if(t.match(/^[0-9,\s]+$/g))return t.split(",").map(Number);if(t.match(/^parzyste: \d+\-\d+$/g)){for(a=(e=t.match(/\d+\-\d+$/g))[0].match(/^\d+/g).map((function(t){return parseInt(t)})),o=e[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),c=r(a[0],o[0]),s=[],f=0;f<c.length;f++)c[f]%2!=1&&s.push(c[f]);m=s.toString();return(t=t.replace(/^parzyste.*/g,m)).split(",").map(Number)}if(t.match(/^nieparzyste: \d+\-\d+$/g)){for(u=(n=t.match(/\d+\-\d+$/g))[0].match(/^\d+/g).map((function(t){return parseInt(t)})),i=n[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),p=r(u[0],i[0]),l=[],f=0;f<p.length;f++)p[f]%2==1&&l.push(p[f]);m=l.toString();return(t=t.replace(/^nieparzyste.*/g,m)).split(",").map(Number)}if(t.match(/^za wyjątkiem nr/g)){var h=t.match(/\d.*/g);return h=h[0].split(",").map(Number),{no:Number.POSITIVE_INFINITY,exception:h}}console.log("Sprawdzam: ",t)}var u=[];for(n=0;n<e.length;n++)"string"==typeof e[n]?u.push(o(e[n])):u.push(e[n]);var i=t.map((function(t){return{DZIELNICA:t.DZIELNICA,JEDNOSTKA_URBANISTYCZNA:t.JEDNOSTKA_URBANISTYCZNA,NR_PAD:t.NR_PAD,ID:t.ID}}));for(n=0;n<i.length;n++)i[n].ULICA=r[n],i[n].NUMERY=u[n];return i}(r),a=o(e,n),c=u(a),p=i(a);postMessage({compared_databases:a,converted_units:n,summary:c,problem_units:p})})}]);