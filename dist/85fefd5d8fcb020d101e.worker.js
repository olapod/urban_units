!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=r=function(t){return e(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},r(n)}t.exports=r},function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r),a=function(t,n){console.time("compare_function_1");for(var e=0;e<t.length;e++)t[e].numer&&t[e].numer.match(/^\d+/gi)&&(t[e].numer=t[e].numer.match(/^\d+/gi),t[e].numer=parseInt(t[e].numer));console.timeEnd("compare_function_1"),console.time("compare_function_2");for(e=0;e<t.length;e++)t[e].ulica&&(t[e].ulica=t[e].ulica.trim(),t[e].ulica=t[e].ulica.replace(/\s{2,}/g," "),t[e].ulica=t[e].ulica.toLowerCase());console.timeEnd("compare_function_2"),console.time("compare_function_3");for(var r=0;r<t.length;r++)for(e=0;e<n.length;e++)n[e].ULICA===t[r].ulica&&n[e].NUMERY===1/0&&(t[r].jednostka=n[e].JEDNOSTKA_URBANISTYCZNA,t[r].jednostka=n[e].JEDNOSTKA_URBANISTYCZNA),n[e].ULICA===t[r].ulica&&Array.isArray(n[e].NUMERY)&&n[e].NUMERY.includes(t[r].numer)&&(t[r].jednostka=n[e].JEDNOSTKA_URBANISTYCZNA),n[e].ULICA!==t[r].ulica||"object"!==o()(n[e].NUMERY)||n[e].NUMERY.no!==1/0||n[e].NUMERY.exception.includes(t[r].numer)||(t[r].jednostka=n[e].JEDNOSTKA_URBANISTYCZNA),n[e].ULICA===t[r].ulica&&null===t[r].numer&&(t[r].jednostka=n[e].JEDNOSTKA_URBANISTYCZNA);return console.timeEnd("compare_function_3"),t},u=function(t,n){for(var e=[],r=1;r<89;r++){var o=t.filter((function(t){return t.jednostka==r})).length;e.push({id:r,count:o})}return e},c=function(t){for(var n=[],e=0;e<t.length;e++)t[e].jednostka||n.push(t[e]);return n};self.addEventListener("message",t=>{if(!t)return;const n=t.data.urban_units,e=t.data.database;console.time("function_1");const r=function(t){for(var n=[],e=[],r=0;r<t.length;r++)void 0===t[r].JEDNOSTKA_URBANISTYCZNA&&t.splice(r,1);for(var o in t)t[o].ULICA&&n.push(t[o].ULICA);for(r=0;r<n.length;r++)n[r]=n[r].replace(/(?<=([A-ZŻŹĆĄŚĘŁÓŃ][a-zżźćńółęąś]*))((\s\d|\sparzyste|\snieparzyste|\sza wyjątkiem).*)/g,""),n[r]=n[r].trim(),n[r]=n[r].replace(/\s{2,}/g," "),n[r]=n[r].toLowerCase();for(e=t.map((function(t){return t.ULICA.replace(/(?<=\d)[^\d,\-]/gi,"")})),r=0;r<e.length;r++)e[r]=e[r].match(/(?<=([A-ZŻŹĆĄŚĘŁÓŃ][a-zżźćńółęąś]*\s))((\d|parzyste|nieparzyste|za wyjątkiem).*)/g);for(r=0;r<e.length;r++)null===e[r]?e[r]=Number.POSITIVE_INFINITY:e[r]=e[r].join();function a(t){function n(t,n){return new Array(n-t+1).fill(void 0).map((function(n,e){return e+t}))}if(t.match(/^parzyste:\s\d+-\d+,\snieparzyste:\s\d+-\d+/g)){for(var e=t.match(/[\d\-]+(?=,\s)/g),r=t.match(/\d+\-\d+$/g),o=e[0].match(/^\d+/g).map((function(t){return parseInt(t)})),a=e[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),u=r[0].match(/^\d+/g).map((function(t){return parseInt(t)})),c=r[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),i=n(o[0],a[0]),s=n(u[0],c[0]),m=[],l=[],p=0;p<i.length;p++)i[p]%2!=1&&m.push(i[p]);for(p=0;p<s.length;p++)s[p]%2==1&&l.push(s[p]);l.toString(),m.toString();var f=m+","+l;return(t=t.replace(/^parzyste.*/g,f)).split(",").map(Number)}if(t.match(/^\d+\-\d+/g)){var d=t.match(/^\d+\-\d+/g),g=d[0].match(/^\d+/g).map((function(t){return parseInt(t)})),y=d[0].match(/[\d]+$/g).map((function(t){return parseInt(t)}));return(f=n(g[0],y[0])).toString(),(t=t.replace(/^\d+\-\d+/g,f)).split(",").map(Number)}if(t.match(/^[0-9,\s]+$/g))return t.split(",").map(Number);if(t.match(/^parzyste: \d+\-\d+$/g)){for(o=(e=t.match(/\d+\-\d+$/g))[0].match(/^\d+/g).map((function(t){return parseInt(t)})),a=e[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),i=n(o[0],a[0]),m=[],p=0;p<i.length;p++)i[p]%2!=1&&m.push(i[p]);f=m.toString();return(t=t.replace(/^parzyste.*/g,f)).split(",").map(Number)}if(t.match(/^nieparzyste: \d+\-\d+$/g)){for(u=(r=t.match(/\d+\-\d+$/g))[0].match(/^\d+/g).map((function(t){return parseInt(t)})),c=r[0].match(/[\d]+$/g).map((function(t){return parseInt(t)})),s=n(u[0],c[0]),l=[],p=0;p<s.length;p++)s[p]%2==1&&l.push(s[p]);f=l.toString();return(t=t.replace(/^nieparzyste.*/g,f)).split(",").map(Number)}if(t.match(/^za wyjątkiem nr/g)){var h=t.match(/\d.*/g);return h=h[0].split(",").map(Number),{no:Number.POSITIVE_INFINITY,exception:h}}console.log("Sprawdzam: ",t)}var u=[];for(r=0;r<e.length;r++)"string"==typeof e[r]?u.push(a(e[r])):u.push(e[r]);var c=t.map((function(t){return{DZIELNICA:t.DZIELNICA,JEDNOSTKA_URBANISTYCZNA:t.JEDNOSTKA_URBANISTYCZNA,NR_PAD:t.NR_PAD,ID:t.ID}}));for(r=0;r<c.length;r++)c[r].ULICA=n[r],c[r].NUMERY=u[r];return c}(n);console.timeEnd("function_1"),console.time("function_2");const o=a(e,r);console.timeEnd("function_2"),console.time("function_3");const i=u(o,r);console.timeEnd("function_3"),console.time("function_4");const s=c(o);console.timeEnd("function_4"),postMessage({compared_databases:o,converted_units:r,summary:i,problem_units:s,loading:!1,error:!1})}),self.onerror=function(t){console.log(t),postMessage({error:!0})}}]);